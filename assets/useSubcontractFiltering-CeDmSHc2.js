import{i as u,r as f}from"./index-CUi0-ZAd.js";import{u as d}from"./useSubcontractHelpers-XkQ8LKzz.js";const _=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP",minimumFractionDigits:0}).format(o??0),I=(o,e)=>(o||0)*(e||0),N=o=>Array.isArray(o)&&o.length>0?o.map(e=>typeof e=="string"?e:e&&typeof e=="object"&&"name"in e?e.name:"").filter(Boolean).join(", "):"-",A=o=>{if(!o)return"-";try{const e=new Date(o);if(isNaN(e.getTime()))return o;const l=e.toLocaleString("default",{month:"long"}),c=e.getFullYear();return`${l}, ${c}`}catch{return o}};function C(o,e){const{getProjectName:l,getProjectCode:c}=d(),{projects:s}=u();return f.useMemo(()=>e?o.map(n=>{if(e.month&&e.month!=="all"&&e.month!=="All"){const i=["January","February","March","April","May","June","July","August","September","October","November","December"].findIndex(t=>t.toLowerCase()===e.month.toLowerCase());if(i!==-1&&(n.dateOfIssuing||n.date_of_issuing)){const t=n.dateOfIssuing||n.date_of_issuing;if(new Date(t).getMonth()!==i)return null}}if(e.year&&e.year!=="all"&&e.year!=="All"&&(n.dateOfIssuing||n.date_of_issuing)){const a=n.dateOfIssuing||n.date_of_issuing;if(new Date(a).getFullYear().toString()!==e.year)return null}if(e.location&&e.location!=="all"&&e.location!=="All"){const a=n.project||n.project_id,i=s.find(r=>r.id===a);if(!i||i.location!==e.location)return null}if(e.projectName&&e.projectName!=="all"&&e.projectName!=="All"){const a=n.project||n.project_id;if(l(a)!==e.projectName)return null}if(e.projectCode&&e.projectCode!=="all"&&e.projectCode!=="All"){const a=n.project||n.project_id;if(c(a)!==e.projectCode)return null}if(e.facilities&&e.facilities.length>0){const a=n.responsibilities||n.subcontract_responsibilities||[];let i=[];if(!a||!Array.isArray(a)||a.length===0)return null;i=a.map(t=>typeof t=="string"?t:typeof t=="object"&&t!==null&&(t.name||t.responsibilities&&t.responsibilities.name||t.responsibility)||"").filter(Boolean);for(const t of e.facilities)if(!i.includes(t))return null}if(e.trades&&e.trades!=="all"&&e.trades!=="All"){const a=n.tradeItems||n.subcontract_trade_items||[];if(!a||a.length===0)return null;const i=a.filter(t=>{const r=t.trade||t.trade_items&&t.trade_items.trades&&t.trade_items.trades.name||t.tradeItem&&t.tradeItem.trade&&t.tradeItem.trade.name;return r&&r.toLowerCase().includes(e.trades.toLowerCase())});return i.length===0?null:{...n,tradeItems:i,subcontract_trade_items:i}}return n}).filter(Boolean):o,[o,e,l,c,s])}export{N as a,_ as b,I as c,A as f,C as u};
