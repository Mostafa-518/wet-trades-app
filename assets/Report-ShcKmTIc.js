import{q as J,j as e,C as j,a as A,b as C,c as u,T as Z,d as ee,e as I,f as T,g as te,h as R,r as k,V as H,P as se,k as ae,m as re,B as F,Y as ne,s as M,X as ie}from"./index-JTitMy_e.js";import{S as b,a as y,b as v,c as w,d as g}from"./select-EDNpX1DE.js";import{T as le,a as oe,b as O,c as Q}from"./tabs-NvA1y9Cg.js";import{R as D,B as $,C as V,X as L,Y as G,T as P,L as ce,a as _,P as de,b as he,c as me,u as xe}from"./PieChart-DudD6c8r.js";import{u as S,w as pe}from"./xlsx-CKN5doRT.js";import{D as B}from"./download-DUx6yATW.js";import"./index-BpvnzYIK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=J("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);function K({tableData:d}){const i=t=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2}).format(t);return d.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available for the table. Please adjust your filters."}):e.jsx("div",{"data-graphs-container":!0,children:e.jsxs(j,{className:"print:shadow-none",children:[e.jsx(A,{children:e.jsx(C,{children:"Report Data Table"})}),e.jsx(u,{children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(I,{children:[e.jsx(T,{children:"Item"}),e.jsxs(T,{className:"text-center",children:["Average Rate",e.jsx("div",{className:"text-center",children:"EGP"})]}),e.jsxs(T,{className:"text-center",children:["Total Amount",e.jsx("div",{className:"text-center",children:"EGP"})]}),e.jsx(T,{className:"text-center",children:"Total Quantity"}),e.jsx(T,{className:"text-center",children:"Wastage %"}),e.jsx(T,{children:"Unit"})]})}),e.jsx(te,{children:d.map((t,n)=>e.jsxs(I,{children:[e.jsx(R,{className:"font-medium",children:t.item}),e.jsx(R,{className:"text-right",children:i(t.averageRate)}),e.jsx(R,{className:"text-right",children:i(t.totalAmount)}),e.jsx(R,{className:"text-right",children:t.totalQuantity.toLocaleString()}),e.jsxs(R,{className:"text-right",children:[t.wastage,"%"]}),e.jsx(R,{children:t.unit})]},n))})]})})]})})}function ue({tableData:d,subcontracts:i,isLoading:t}){const[n,o]=k.useState(""),r=k.useMemo(()=>{const c=new Set;return d.forEach(l=>c.add(l.item)),Array.from(c).sort()},[d]),a=k.useMemo(()=>{if(!n||!i.length)return[];const c=new Map;return i.forEach(l=>{if(!l.projects||!l.subcontract_trade_items)return;const h=l.projects,p=`${h.name}-${h.code}`,E=l.subcontract_trade_items.filter(f=>{var N;return((N=f.trade_items)==null?void 0:N.name)===n});E.length!==0&&E.forEach(f=>{const N=c.get(p);N?(N.totalAmount+=f.total_price||0,N.totalQuantity+=f.quantity||0,N.totalWastage+=f.wastage_percentage||0,N.count+=1):c.set(p,{projectName:h.name,projectCode:h.code,totalAmount:f.total_price||0,totalQuantity:f.quantity||0,totalWastage:f.wastage_percentage||0,count:1})})}),Array.from(c.values()).map(l=>({projectName:l.projectName.length>20?l.projectName.substring(0,20)+"...":l.projectName,projectCode:l.projectCode,averageRate:l.totalQuantity>0?l.totalAmount/l.totalQuantity:0,totalAmount:l.totalAmount,wastage:l.count>0?l.totalWastage/l.count:0,quantity:l.totalQuantity})).filter(l=>l.averageRate>0)},[n,i]),x=({active:c,payload:l,label:h})=>{if(c&&l&&l.length){const p=l[0].payload;return e.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold",children:`${p.projectName} (${p.projectCode})`}),e.jsx("p",{className:"text-blue-600",children:`Trade Item: ${n}`}),e.jsx("p",{className:"text-green-600",children:`Average Rate: EGP ${p.averageRate.toFixed(2)}`}),e.jsx("p",{className:"text-orange-600",children:`Total Amount: EGP ${p.totalAmount.toLocaleString()}`}),e.jsx("p",{className:"text-red-600",children:`Wastage: ${p.wastage.toFixed(1)}%`}),e.jsx("p",{className:"text-gray-600",children:`Quantity: ${p.quantity.toLocaleString()}`})]})}return null};return t?e.jsxs(j,{className:"print:shadow-none",children:[e.jsx(A,{children:e.jsx(C,{children:"Project Comparison Analysis"})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-center h-80",children:[e.jsx(H,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading project data..."})]})})]}):e.jsxs(j,{className:"print:shadow-none",children:[e.jsxs(A,{children:[e.jsx(C,{children:"Project Comparison Analysis"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Trade Item to Analyze:"}),e.jsxs(b,{value:n,onValueChange:o,children:[e.jsx(y,{className:"w-full md:w-80",children:e.jsx(v,{placeholder:"Choose a trade item..."})}),e.jsx(w,{children:r.map(c=>e.jsx(g,{value:c,children:c},c))})]})]})]}),e.jsxs(u,{children:[n?a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium",children:"No project data available"}),e.jsxs("p",{className:"text-sm mt-2",children:['The selected trade item "',n,'" has no data across projects']})]}):e.jsx("div",{className:"h-96",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:a,margin:{top:60,right:30,left:20,bottom:100},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(L,{dataKey:"projectName",angle:-45,textAnchor:"end",height:120,fontSize:12,interval:0}),e.jsx(G,{label:{value:"Average Rate (EGP)",angle:-90,position:"outsideLeft",dx:-30,style:{textAnchor:"middle"}},fontSize:12,interval:0}),e.jsx(P,{content:e.jsx(x,{})}),e.jsx(ce,{}),e.jsx(_,{dataKey:"averageRate",fill:"#3b82f6",name:"Average Rate (EGP)",radius:[4,4,0,0]})]})})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium",children:"Select a trade item to view project comparison"}),e.jsx("p",{className:"text-sm mt-2",children:"Choose from the dropdown above to analyze rates across projects"})]}),n&&a.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-2",children:['Analysis Summary for "',n,'"']}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Projects Analyzed:"})," ",a.length]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Highest Rate:"})," EGP",Math.max(...a.map(c=>c.averageRate)).toFixed(2)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lowest Rate:"})," EGP",Math.min(...a.map(c=>c.averageRate)).toFixed(2)]})]})]})]})]})}const W=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658"];function ge({tableData:d,subcontracts:i=[],isLoading:t=!1}){const n=d.map(r=>({name:r.item.length>15?r.item.substring(0,15)+"...":r.item,fullName:r.item,totalAmount:r.totalAmount,averageRate:r.averageRate,wastage:r.wastage,quantity:r.totalQuantity})),o=d.map(r=>({name:r.item.length>20?r.item.substring(0,20)+"...":r.item,value:r.totalAmount}));return d.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available for charts. Please adjust your filters."}):e.jsxs("div",{className:"space-y-6","data-graphs-container":!0,children:[e.jsx(ue,{tableData:d,subcontracts:i,isLoading:t}),e.jsxs(j,{className:"print:shadow-none print:break-inside-avoid",children:[e.jsx(A,{children:e.jsx(C,{children:"Total Amount by Item"})}),e.jsx(u,{children:e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:n,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(L,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),e.jsx(G,{}),e.jsx(P,{formatter:(r,a)=>[a==="totalAmount"?`$${Number(r).toLocaleString()}`:r,"Total Amount"],labelFormatter:r=>{const a=n.find(x=>x.name===r);return a?a.fullName:r}}),e.jsx(_,{dataKey:"totalAmount",fill:"#8884d8"})]})})})})]}),e.jsxs(j,{className:"print:shadow-none print:break-inside-avoid",children:[e.jsx(A,{children:e.jsx(C,{children:"Average Rate by Item"})}),e.jsx(u,{children:e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:n,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(L,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),e.jsx(G,{}),e.jsx(P,{formatter:(r,a)=>[a==="averageRate"?`$${Number(r).toFixed(2)}`:r,"Average Rate"],labelFormatter:r=>{const a=n.find(x=>x.name===r);return a?a.fullName:r}}),e.jsx(_,{dataKey:"averageRate",fill:"#82ca9d"})]})})})})]}),e.jsxs(j,{className:"print:shadow-none print:break-inside-avoid",children:[e.jsx(A,{children:e.jsx(C,{children:"Total Amount Distribution"})}),e.jsx(u,{children:e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(de,{children:[e.jsx(he,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:a})=>`${r} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((r,a)=>e.jsx(me,{fill:W[a%W.length]},`cell-${a}`))}),e.jsx(P,{formatter:r=>[`$${Number(r).toLocaleString()}`,"Total Amount"]})]})})})})]}),e.jsxs(j,{className:"print:shadow-none print:break-inside-avoid",children:[e.jsx(A,{children:e.jsx(C,{children:"Wastage Percentage by Item"})}),e.jsx(u,{children:e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{data:n,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(V,{strokeDasharray:"3 3"}),e.jsx(L,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),e.jsx(G,{}),e.jsx(P,{formatter:(r,a)=>[a==="wastage"?`${Number(r)}%`:r,"Wastage %"],labelFormatter:r=>{const a=n.find(x=>x.name===r);return a?a.fullName:r}}),e.jsx(_,{dataKey:"wastage",fill:"#ff7300"})]})})})})]})]})}const fe=(d,i)=>{var t;try{const n=d.map((h,p)=>({Item:h.item,"Average Rate":h.averageRate.toFixed(2),"Total Amount":h.totalAmount,"Total Quantity":h.totalQuantity,"Wastage %":h.wastage,Unit:h.unit,Count:h.count})),o=S.book_new(),r=S.json_to_sheet(n);S.book_append_sheet(o,r,"Report Data");const a=[{Filter:"Month",Value:i.month||"All"},{Filter:"Year",Value:i.year||"All"},{Filter:"Location",Value:i.location||"All"},{Filter:"Trades",Value:i.trades||"All"},{Filter:"Project Name",Value:i.projectName||"All"},{Filter:"Project Code",Value:i.projectCode||"All"},{Filter:"Present Data",Value:i.presentData||"by-project"},{Filter:"Facilities",Value:((t=i.facilities)==null?void 0:t.join(", "))||"None"}],x=S.json_to_sheet(a);S.book_append_sheet(o,x,"Applied Filters");const l=`report-table-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;return pe(o,l),{success:!0,filename:l}}catch(n){return console.error("Error exporting table to Excel:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},q=async d=>{try{const i=document.querySelector("[data-graphs-container]");if(!i)throw new Error("Graphs container not found");const t=window.open("","_blank");if(!t)throw new Error("Could not open print window");const n=i.cloneNode(!0),o=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Report Graphs</title>
          <style>
            body { 
              font-family: Arial, sans-serif; 
              margin: 20px;
              background: white;
            }
            .header {
              text-align: center;
              margin-bottom: 20px;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
            }
            .filters {
              margin-bottom: 20px;
              padding: 10px;
              background: #f5f5f5;
              border-radius: 5px;
            }
            .filter-item {
              display: inline-block;
              margin: 5px 10px;
              padding: 3px 8px;
              background: #dbeafe;
              border-radius: 3px;
              font-size: 12px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
          <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        </head>
        <body>
          <div class="header">
            <h1>Report Graphs</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
          </div>
          
          <div class="filters">
            <h3>Applied Filters:</h3>
            ${Object.entries(d).filter(([r,a])=>a&&a!=="all"&&a!=="All"&&(Array.isArray(a)?a.length>0:!0)).map(([r,a])=>{const x=Array.isArray(a)?a.join(", "):a;return`<span class="filter-item">${r}: ${x}</span>`}).join("")}
          </div>
          
          <div class="graphs-content">
            ${n.innerHTML}
          </div>
        </body>
      </html>
    `;return t.document.write(o),t.document.close(),setTimeout(()=>{t.print(),setTimeout(()=>{t.close()},1e3)},1e3),{success:!0}}catch(i){return console.error("Error exporting graphs to PDF:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}};function Ne(){const d=ae(),{toast:i}=re(),{reportData:t,filterOptions:n,updateFilter:o,resetFilters:r,isLoading:a,filteredSubcontracts:x}=xe();if(k.useEffect(()=>{console.log("Report component mounted"),console.log("Report data:",t),console.log("Is loading:",a),console.log("Filter options:",n)},[t,a,n]),!t&&!a)return console.error("Report data is null and not loading"),e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-red-600 mb-4",children:"Error loading report data"}),e.jsx(F,{onClick:()=>window.location.reload(),children:"Reload Page"})]})});if(a)return e.jsxs("div",{className:"flex items-center justify-center min-h-96",children:[e.jsx(H,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading report data..."})]});if(!t)return console.warn("Report data is still null after loading"),e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"No report data available"}),e.jsx(F,{onClick:()=>window.location.reload(),children:"Reload Page"})]})});const c=t.filters.presentData==="by-project",l=s=>{if(s==="All"){o("facilities",[]);return}const m=t.filters.facilities,z=m.includes(s)?m.filter(X=>X!==s):[...m,s];o("facilities",z)},h=s=>{const m=t.filters.facilities.filter(z=>z!==s);o("facilities",m)},p=()=>{const s=new URLSearchParams;t.filters.month!=="all"&&t.filters.month!=="All"&&s.set("month",t.filters.month),t.filters.year!=="all"&&t.filters.year!=="All"&&s.set("year",t.filters.year),t.filters.location!=="all"&&t.filters.location!=="All"&&s.set("location",t.filters.location),t.filters.trades!=="all"&&t.filters.trades!=="All"&&s.set("trades",t.filters.trades),t.filters.projectName!=="all"&&t.filters.projectName!=="All"&&s.set("projectName",t.filters.projectName),t.filters.projectCode!=="all"&&t.filters.projectCode!=="All"&&s.set("projectCode",t.filters.projectCode),t.filters.facilities.length>0&&s.set("facilities",JSON.stringify(t.filters.facilities));const m=s.toString();d(`/subcontracts${m?`?${m}`:""}`)},E=()=>{window.print()},f=async()=>{const s=fe(t.tableData,t.filters);s.success?i({title:"Export Successful",description:`Table data exported as ${s.filename}`}):i({title:"Export Failed",description:s.error||"Failed to export table data",variant:"destructive"})},N=async()=>{const s=await q(t.filters);s.success?i({title:"Export Successful",description:"Table exported to PDF (print dialog opened)"}):i({title:"Export Failed",description:s.error||"Failed to export table",variant:"destructive"})},U=async()=>{const s=await q(t.filters);s.success?i({title:"Export Successful",description:"Graphs exported to PDF (print dialog opened)"}):i({title:"Export Failed",description:s.error||"Failed to export graphs",variant:"destructive"})},Y=Object.entries(t.filters).some(([s,m])=>s==="facilities"?Array.isArray(m)&&m.length>0:m!=="all"&&m!=="by-project"&&m!=="name");return e.jsxs("div",{className:"space-y-6 print:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between print:justify-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight print:text-2xl",children:"Report"}),e.jsxs("div",{className:"flex gap-2 print:hidden",children:[e.jsx(ne,{onReset:r,hasData:Y,variant:"outline",size:"sm",children:"Reset All Filters"}),e.jsxs(F,{onClick:E,variant:"outline",size:"sm",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Print/PDF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-2",children:[e.jsxs(j,{className:"print:shadow-none",children:[e.jsx(A,{className:"pb-3 print:pb-2",children:e.jsx(C,{className:"text-sm font-medium",children:"Present Data:"})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{variant:"outline",className:"bg-gray-50",children:t.filters.presentData}),e.jsxs(b,{value:t.filters.presentData,onValueChange:s=>o("presentData",s),children:[e.jsx(y,{className:"w-auto h-8 p-0 border-0 print:hidden",children:e.jsx(v,{})}),e.jsx(w,{children:n.presentDataOptions.map(s=>e.jsx(g,{value:s.toLowerCase().replace(" ","-"),children:s},s))})]})]})})]}),e.jsx(j,{className:"opacity-0 print:hidden",children:e.jsx(u,{className:"h-20"})}),e.jsxs(j,{className:"print:shadow-none",children:[e.jsx(A,{className:"pb-3 print:pb-2",children:e.jsx(C,{className:"text-sm font-medium",children:"No. Of All Subcontract:"})}),e.jsx(u,{children:e.jsxs("div",{className:"text-2xl font-bold text-center print:text-lg",children:["[",t.totalSubcontracts,"] Subcontract"]})})]})]}),e.jsx(j,{className:"print:shadow-none print:break-inside-avoid",children:e.jsx(u,{className:"pt-6 print:pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 print:grid-cols-4 print:gap-2",children:[e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Month:"}),e.jsxs(b,{value:t.filters.month,onValueChange:s=>o("month",s),children:[e.jsx(y,{className:"print:border-none print:shadow-none",children:e.jsx(v,{})}),e.jsx(w,{children:n.months.map(s=>e.jsx(g,{value:s.toLowerCase(),children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Year:"}),e.jsxs(b,{value:t.filters.year,onValueChange:s=>o("year",s),children:[e.jsx(y,{className:"print:border-none print:shadow-none",children:e.jsx(v,{})}),e.jsx(w,{children:n.years.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),!c&&e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location of work:"}),e.jsxs(b,{value:t.filters.location,onValueChange:s=>o("location",s),children:[e.jsx(y,{className:"print:border-none print:shadow-none",children:e.jsx(v,{})}),e.jsx(w,{children:n.locations.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),c&&e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:t.filters.projectFilterType==="name"?"Project Name:":"Project Code:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{value:t.filters.projectFilterType==="name"?t.filters.projectName:t.filters.projectCode,onValueChange:s=>o(t.filters.projectFilterType==="name"?"projectName":"projectCode",s),children:[e.jsx(y,{className:"flex-1 print:border-none print:shadow-none",children:e.jsx(v,{})}),e.jsx(w,{children:(t.filters.projectFilterType==="name"?n.projectNames:n.projectCodes).map(s=>e.jsx(g,{value:s,children:s},s))})]}),e.jsxs(b,{value:t.filters.projectFilterType,onValueChange:s=>o("projectFilterType",s),children:[e.jsx(y,{className:"w-20 print:hidden",children:e.jsx(v,{})}),e.jsxs(w,{children:[e.jsx(g,{value:"name",children:"Name"}),e.jsx(g,{value:"code",children:"Code"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Trades:"}),e.jsxs(b,{value:t.filters.trades,onValueChange:s=>o("trades",s),children:[e.jsx(y,{className:"print:border-none print:shadow-none",children:e.jsx(v,{})}),e.jsx(w,{children:n.trades.map(s=>e.jsx(g,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2 print:space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Facilities (Responsibilities):"}),e.jsxs(b,{onValueChange:l,children:[e.jsx(y,{className:"print:border-none print:shadow-none",children:e.jsx(v,{placeholder:"Select facilities..."})}),e.jsxs(w,{children:[e.jsx(g,{value:"All",children:"Clear All"}),n.facilities.filter(s=>s!=="All").map(s=>e.jsx(g,{value:s,children:s},s))]})]}),t.filters.facilities.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 print:gap-0.5",children:t.filters.facilities.map(s=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1 print:text-xs",children:[s,e.jsx(F,{variant:"ghost",size:"sm",className:"h-auto p-0 w-4 h-4 print:hidden",onClick:()=>h(s),children:e.jsx(ie,{className:"h-3 w-3"})})]},s))})]})]})})}),e.jsx("div",{className:"flex justify-center print:break-inside-avoid",children:e.jsx(j,{className:"w-auto cursor-pointer hover:shadow-lg transition-shadow print:shadow-none print:cursor-default",onClick:p,children:e.jsx(u,{className:"pt-6 print:pt-4",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-lg font-semibold print:text-base",children:["No. Of Subcontract: [",t.currentSubcontracts,"] Subcontract"]})})})})}),e.jsxs(le,{defaultValue:"table",className:"w-full print:hidden",children:[e.jsxs(oe,{className:"grid w-full grid-cols-2",children:[e.jsx(O,{value:"table",children:"Table View"}),e.jsx(O,{value:"graphs",children:"Graphs View"})]}),e.jsx(Q,{value:"table",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(F,{onClick:f,variant:"outline",size:"sm",disabled:a||t.tableData.length===0,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Export Table to Excel"]}),e.jsxs(F,{onClick:N,variant:"outline",size:"sm",disabled:a||t.tableData.length===0,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Export Table to PDF"]})]}),e.jsx(K,{tableData:t.tableData})]})}),e.jsx(Q,{value:"graphs",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{onClick:U,variant:"outline",size:"sm",disabled:a||t.tableData.length===0,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Export Graphs to PDF"]})}),e.jsx(ge,{tableData:t.tableData,subcontracts:x,isLoading:a})]})})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx(K,{tableData:t.tableData})})]})}function Te(){return e.jsx(se,{pageName:"Report",children:e.jsx(Ne,{})})}export{Te as Report};
