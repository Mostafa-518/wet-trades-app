import{k as g,i as b,j as e,B as m,A as D,C as x,a as j,b as u,c as h,F as f,p as C}from"./index-B-fhMUS3.js";import{T as P,a as S,b as N,c as p}from"./tabs-CTHU7d65.js";import{S as T}from"./square-pen-OK-kRDBn.js";import{B as k}from"./building-2-DO5_lzX6.js";function B({project:t,onBack:r,onEdit:l}){const d=g(),{subcontracts:i,projects:c,subcontractors:a}=b(),o=i.filter(s=>s.project===t.id),v=s=>{const n=a.find(w=>w.id===s);return n?n.companyName:s},y=s=>{d(`/subcontracts/${s}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(m,{variant:"outline",onClick:r,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.name}),e.jsx("p",{className:"text-muted-foreground",children:t.code})]})]}),e.jsxs(m,{onClick:()=>l(t),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Edit Project"]})]}),e.jsxs(P,{defaultValue:"info",className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(N,{value:"info",children:"Project Info"}),e.jsxs(N,{value:"subcontracts",children:["Subcontracts (",o.length,")"]})]}),e.jsx(p,{value:"info",children:e.jsxs(x,{children:[e.jsx(j,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Project Information"]})}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Project Name"}),e.jsx("p",{className:"text-lg font-semibold",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Project Code"}),e.jsx("p",{className:"text-lg font-semibold",children:t.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("p",{className:"text-lg font-semibold",children:t.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"text-lg font-semibold",children:new Date(t.createdAt).toLocaleDateString()})]})]})})]})}),e.jsx(p,{value:"subcontracts",children:e.jsxs(x,{children:[e.jsx(j,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Project Subcontracts"]})}),e.jsx(h,{children:o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>y(s.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-blue-600 hover:text-blue-800",children:v(s.subcontractor)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Contract ID: ",s.contractId]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Trades:"})," ",s.tradeItems.map(n=>n.trade).join(", ")||"No trades specified"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Total Value:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP"}).format(s.totalValue)]}),s.responsibilities.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Responsibilities:"})," ",s.responsibilities.join(", ")]})]}),s.startDate&&s.endDate&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Duration:"})," ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":s.status==="completed"?"bg-blue-100 text-blue-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":s.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status})})]})},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No subcontracts found for this project."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Subcontracts will appear here once they are created for this project."})]})})]})})]})]})}function V(){const{id:t}=C(),r=g(),{projects:l}=b(),d=()=>{r("/projects")},i=a=>{r("/projects",{state:{editProject:a}})};if(!t)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested project could not be found."})]});const c=l.find(a=>a.id===t);return c?e.jsx(B,{project:c,onBack:d,onEdit:i}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested project could not be found."})]})}export{V as ProjectDetail};
